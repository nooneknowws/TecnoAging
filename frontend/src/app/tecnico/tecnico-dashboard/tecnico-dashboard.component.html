<div class="dashboard-container">
  <header class="header mt-4">
    <h1>Dashboard</h1>
    <div class="user-info" *ngIf="currentTecnico">
      <span>Bem-vindo(a), <a [routerLink]="['/tecnico/editar-perfil']">{{currentTecnico.nome}}</a></span>
      <button class="btn-logout" (click)="logout()">Sair</button>
    </div>
  </header>

  <nav class="tabs" [class.disabled]="!selectedPaciente">
    <button
      *ngFor="let section of sections"
      [class.active]="activeSection === section.id"
      (click)="scrollToSection(section.id)"
      [disabled]="!selectedPaciente">
      {{section.label}}
    </button>
  </nav>

  <div class="content">
    <section #sectionRef id="pacientes" class="section">
      <h2>Lista de Pacientes</h2>
      <div class="patients-list">
        <div class="patient-cards">
          <div *ngFor="let paciente of pacientes"
               class="patient-card"
               [class.selected]="selectedPaciente?.cpf === paciente.cpf"
               (click)="selectPaciente(paciente)">
            <h3>{{paciente.nome}}</h3>
            <p>CPF: {{paciente.cpf}}</p>
            <p>Idade: {{paciente.idade}} anos</p>
            <div class="card-actions">
              <button (click)="consultarPerfil(paciente)">Ver Perfil</button>
              <button (click)="editarPerfil(paciente)">Editar Perfil</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section #sectionRef id="formularios" class="section">
      <h2>Formulários Disponíveis</h2>
      <div class="forms-grid" [class.disabled]="!selectedPaciente">
        <div class="form-card" *ngFor="let form of formulariosDisponiveis">
          <h3>{{form.titulo}}</h3>
          <button 
            (click)="navigateToFormulario(form.tipo)"
            [disabled]="!selectedPaciente">
            Preencher
          </button>
        </div>
      </div>
    </section>

    <section #sectionRef id="resultados" class="section">
      <h2>Resultados e Comparações</h2>
      <div class="results-content" [class.disabled]="!selectedPaciente">
        <div *ngIf="selectedPaciente" class="results-actions">
          <button (click)="viewPatientHistory(selectedPaciente)">
            Ver Histórico
          </button>
          <button (click)="compareResults()">
            Comparar Resultados
          </button>
        </div>
        <div *ngIf="!selectedPaciente" class="no-selection">
          Selecione um paciente para ver os resultados
        </div>
      </div>
    </section>
  </div>
</div>